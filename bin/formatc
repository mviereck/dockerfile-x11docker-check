#! /bin/bash
# Try to run and control a terminal with xdotool

echo "Trying to run a terminal on host sending keystrokes"
echo "like ALT+F2 with xdotool."
echo "This is only possible with x11docker option --hostdisplay along with"
echo "--clipboard or --gpu."
echo "The widespread solution to run GUI applications in Docker with"
echo "just sharing /tmp/.X11-unix open a security leak here."
echo "XTEST error messages indicate that remote host control with"
echo "virtual key presses is not possible and the isolation works."
echo "Some commands appearing in this terminal indicate that"
echo "calling the apllication launcher with ALT+F2 failed."
echo ""

xdotool key alt+F2
sleep 1
xdotool type x-terminal-emulator
sleep 1
xdotool key Return
sleep 3
xdotool type "echo Hello Host!"
sleep 1
xdotool key Return
sleep 1
xdotool type "echo format C:"
sleep 1
xdotool key Return
sleep 1
xdotool type 'pkexec sh -c "echo running format C: as root!"'
sleep 1
xdotool key Return
sleep 1
